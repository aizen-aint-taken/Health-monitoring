<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Health Monitor — Brgy. San Isidro</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: ui-sans-serif, system-ui, sans-serif;
      background: linear-gradient(135deg, #f8fafc 0%, #ecfeff 50%, #f0fdfa 100%);
      min-height: 100vh;
      color: #1e293b;
    }

    /* ── HEADER ── */
    header {
      background: rgba(255,255,255,0.85);
      backdrop-filter: blur(8px);
      border-bottom: 1px solid #cffafe;
      position: sticky;
      top: 0;
      z-index: 40;
    }
    .header-inner {
      max-width: 900px;
      margin: 0 auto;
      padding: 10px 16px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .logo {
      width: 48px; height: 48px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid #facc15;
      box-shadow: 0 1px 4px rgba(0,0,0,0.15);
      flex-shrink: 0;
    }
    .header-text { flex: 1; min-width: 0; }
    .header-text h1 { font-size: 13px; font-weight: 700; color: #1e293b; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .header-text p  { font-size: 11px; color: #94a3b8; }
    .btn { border: none; cursor: pointer; font-weight: 600; border-radius: 12px; padding: 7px 12px; font-size: 11px; white-space: nowrap; box-shadow: 0 1px 4px rgba(0,0,0,0.1); display: inline-flex; align-items: center; gap: 4px; transition: opacity .15s; }
    .btn:hover { opacity: .85; }
    .btn-cyan   { background: #06b6d4; color: #fff; }
    .btn-slate  { background: #64748b; color: #fff; }
    .btn-red    { background: #ef4444; color: #fff; }
    .btn-cancel { background: #fff; color: #475569; border: 1px solid #e2e8f0; box-shadow: none; }

    /* ── MAIN ── */
    main { max-width: 900px; margin: 0 auto; padding: 20px 16px; display: flex; flex-direction: column; gap: 16px; }

    /* ── CLOCK ── */
    .clock-card {
      background: #fff;
      border-radius: 16px;
      border: 1px solid #f1f5f9;
      box-shadow: 0 1px 4px rgba(0,0,0,.04);
      padding: 16px;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }
    .clock-label { font-size: 10px; color: #94a3b8; text-transform: uppercase; letter-spacing: .08em; margin-bottom: 2px; }
    .clock-date  { font-size: 14px; font-weight: 600; color: #334155; }
    .clock-time  { font-size: 28px; font-weight: 800; font-family: monospace; background: linear-gradient(90deg,#06b6d4,#14b8a6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-align: right; }

    /* ── STATS ── */
    .stats-grid { display: grid; grid-template-columns: repeat(3,1fr); gap: 10px; }
    .stat-card  { background: #fff; border-radius: 16px; border: 1px solid #f1f5f9; box-shadow: 0 1px 4px rgba(0,0,0,.04); padding: 12px; text-align: center; }
    .stat-value { font-size: 22px; font-weight: 800; background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .stat-blue  { background-image: linear-gradient(90deg,#60a5fa,#22d3ee); }
    .stat-red   { background-image: linear-gradient(90deg,#fb7185,#ef4444); }
    .stat-green { background-image: linear-gradient(90deg,#2dd4bf,#10b981); }
    .stat-label { font-size: 10px; color: #94a3b8; margin-top: 2px; }

    /* ── FILTERS ── */
    .filters { display: flex; gap: 8px; flex-wrap: wrap; }
    .filters input, .filters select {
      flex: 1; min-width: 140px;
      border: 1px solid #e2e8f0; border-radius: 12px;
      padding: 8px 14px; font-size: 13px;
      outline: none; background: #fff;
    }
    .filters input:focus, .filters select:focus { border-color: #22d3ee; box-shadow: 0 0 0 2px #cffafe; }

    /* ── TABLE WRAPPER ── */
    .table-wrap {
      background: #fff;
      border-radius: 16px;
      border: 1px solid #f1f5f9;
      box-shadow: 0 1px 4px rgba(0,0,0,.04);
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }
    .swipe-hint { font-size: 11px; color: #94a3b8; text-align: right; margin-bottom: 4px; }
    table { width: 100%; border-collapse: collapse; font-size: 13px; min-width: 520px; }
    thead tr { background: linear-gradient(90deg,#06b6d4,#14b8a6); }
    thead th { color: #fff; text-align: left; padding: 12px 16px; font-size: 11px; font-weight: 600; letter-spacing: .05em; white-space: nowrap; }
    tbody tr { border-top: 1px solid #f8fafc; transition: background .1s; }
    tbody tr:nth-child(even) { background: #f8fafc; }
    tbody tr:hover { background: #ecfeff; }
    td { padding: 10px 16px; white-space: nowrap; color: #475569; }
    td.mono { font-family: monospace; color: #334155; }

    .badge {
      display: inline-block; padding: 2px 10px; border-radius: 999px;
      font-size: 11px; font-weight: 700; border: 1px solid;
    }
    .badge-positive { background: #fee2e2; color: #dc2626; border-color: #fecaca; }
    .badge-negative { background: #d1fae5; color: #059669; border-color: #a7f3d0; }

    .pic-thumb { width: 38px; height: 38px; border-radius: 8px; object-fit: cover; border: 1px solid #e2e8f0; }
    .pic-placeholder {
      width: 38px; height: 38px; border-radius: 8px;
      border: 2px dashed #e2e8f0;
      display: flex; align-items: center; justify-content: center; color: #cbd5e1;
    }

    .action-btn { background: none; border: none; cursor: pointer; font-size: 12px; font-weight: 600; padding: 2px 4px; border-radius: 4px; }
    .action-edit { color: #0891b2; } .action-edit:hover { color: #0e7490; }
    .action-del  { color: #f87171; } .action-del:hover  { color: #dc2626; }

    .empty-row td { text-align: center; padding: 32px; color: #94a3b8; }

    /* ── LOADING ── */
    .loading { display: flex; align-items: center; justify-content: center; gap: 4px; padding: 20px; }
    .loading span.txt { font-size: 11px; color: #94a3b8; text-transform: uppercase; letter-spacing: .1em; margin-right: 6px; }
    .dot {
      width: 6px; height: 6px; border-radius: 50%; background: #22d3ee;
      display: inline-block;
      animation: dotBounce 1.4s infinite ease-in-out;
    }
    @keyframes dotBounce {
      0%,80%,100% { transform: scale(.4); opacity: .3; }
      40%          { transform: scale(1);  opacity: 1;  }
    }

    /* ── MODAL OVERLAY ── */
    .overlay {
      display: none; position: fixed; inset: 0; z-index: 50;
      background: rgba(0,0,0,.4);
      align-items: center; justify-content: center;
      padding: 16px;
    }
    .overlay.active { display: flex; }
    .modal {
      background: #fff; border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,.2);
      width: 100%; max-width: 420px; padding: 24px;
    }
    .modal h2 { font-size: 16px; font-weight: 700; color: #1e293b; margin-bottom: 16px; }
    .field { margin-bottom: 12px; }
    .field label { display: block; font-size: 11px; font-weight: 600; color: #64748b; margin-bottom: 4px; }
    .field label .req { color: #f87171; }
    .field label .opt { color: #cbd5e1; }
    .field input[type=text], .field input[type=file] {
      width: 100%; border: 1px solid #e2e8f0; border-radius: 10px;
      padding: 8px 12px; font-size: 13px; outline: none;
    }
    .field input:focus { border-color: #22d3ee; box-shadow: 0 0 0 2px #cffafe; }
    #imgPreview { display: none; width: 100%; height: 110px; object-fit: cover; border-radius: 10px; border: 1px solid #e2e8f0; margin-top: 8px; }
    .result-btns { display: flex; gap: 10px; margin-top: 4px; }
    .result-btn {
      flex: 1; padding: 8px; border-radius: 10px; font-size: 13px; font-weight: 600;
      border: 1px solid #e2e8f0; background: #fff; color: #64748b; cursor: pointer; transition: all .15s;
    }
    .result-btn.active-pos { background: #ef4444; color: #fff; border-color: #ef4444; }
    .result-btn.active-neg { background: #10b981; color: #fff; border-color: #10b981; }
    .error-msg { font-size: 11px; color: #ef4444; font-weight: 600; text-align: center; margin-top: 8px; display: none; }
    .modal-btns { display: flex; gap: 8px; margin-top: 16px; }
    .modal-btns button { flex: 1; padding: 9px; border-radius: 10px; font-size: 13px; font-weight: 600; cursor: pointer; border: none; }

    /* ── CONFIRM DIALOG ── */
    .confirm-modal { max-width: 360px; text-align: center; }
    .confirm-icon {
      width: 48px; height: 48px; border-radius: 50%; background: #fee2e2;
      display: flex; align-items: center; justify-content: center;
      margin: 0 auto 14px;
    }
    .confirm-modal h2 { font-size: 15px; }
    .confirm-modal p  { font-size: 13px; color: #94a3b8; margin: 6px 0 18px; }

    @media (max-width: 500px) {
      .clock-time { font-size: 22px; }
      .stat-value { font-size: 18px; }
    }
  </style>
</head>
<body>

<!-- HEADER -->
<header>
  <div class="header-inner">
    <img class="logo" src="SAN-ISIDRO-LOGO-copy.jpg" alt="Seal" />
    <div class="header-text">
      <h1>Brgy. San Isidro, Bislig City</h1>
      <p>Barangay Health Center — Health Monitor</p>
    </div>
    <button class="btn btn-cyan" onclick="openModal()">+ Add</button>
  
  </div>
</header>

<!-- MAIN -->
<main>

  <!-- Clock -->
  <div class="clock-card">
    <div>
      <div class="clock-label">Current Date</div>
      <div class="clock-date" id="clockDate">—</div>
    </div>
    <div>
      <div class="clock-label" style="text-align:right">Current Time</div>
      <div class="clock-time" id="clockTime">--:--:--</div>
    </div>
  </div>

  <!-- Stats -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-value stat-blue" id="statTotal">0</div>
      <div class="stat-label">Total Records</div>
    </div>
    <div class="stat-card">
      <div class="stat-value stat-red" id="statPositive">0</div>
      <div class="stat-label">Positive</div>
    </div>
    <div class="stat-card">
      <div class="stat-value stat-green" id="statNegative">0</div>
      <div class="stat-label">Negative</div>
    </div>
  </div>

  <!-- Filters -->
  <div class="filters">
    <input type="text" id="searchInput" placeholder="Search by date, time, or result..." oninput="renderTable()" />
    <select id="filterSelect" onchange="renderTable()">
      <option value="all">All Results</option>
      <option value="Positive">Positive</option>
      <option value="Negative">Negative</option>
    </select>
  </div>

  <!-- Table -->
  <div>
    <div class="swipe-hint">← swipe to see more →</div>
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>Date</th>
            <th>Time Stamp</th>
            <th>Picture</th>
            <th>Result</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>
    </div>
  </div>

  <!-- Loading -->
  <div class="loading">
    <span class="txt">Loading</span>
    <span class="dot" style="animation-delay:0s"></span>
    <span class="dot" style="animation-delay:.15s"></span>
    <span class="dot" style="animation-delay:.3s"></span>
    <span class="dot" style="animation-delay:.45s"></span>
    <span class="dot" style="animation-delay:.6s"></span>
    <span class="dot" style="animation-delay:.75s"></span>
  </div>

</main>

<!-- ADD/EDIT MODAL -->
<div class="overlay" id="modalOverlay">
  <div class="modal">
    <h2 id="modalTitle">Add New Record</h2>
    <div class="field">
      <label>Date <span class="req">*</span></label>
      <input type="text" id="inputDate" placeholder="e.g. 1/15/26" />
    </div>
    <div class="field">
      <label>Time Stamp <span class="req">*</span></label>
      <input type="text" id="inputTime" placeholder="e.g. 1:12:15" />
    </div>
    <div class="field">
      <label>Picture <span class="opt">(optional)</span></label>
      <input type="file" id="inputPicture" accept="image/*" onchange="previewImage()" />
      <img id="imgPreview" alt="preview" />
    </div>
    <div class="field">
      <label>Result <span class="req">*</span></label>
      <div class="result-btns">
        <button class="result-btn active-pos" id="btnPositive" onclick="setResult('Positive')">Positive</button>
        <button class="result-btn" id="btnNegative" onclick="setResult('Negative')">Negative</button>
      </div>
    </div>
    <div class="error-msg" id="errorMsg">Date and Time Stamp are required.</div>
    <div class="modal-btns">
      <button class="btn-cancel" onclick="closeModal()">Cancel</button>
      <button class="btn btn-cyan" onclick="saveRecord()">Save</button>
    </div>
  </div>
</div>

<!-- DELETE CONFIRM MODAL -->
<div class="overlay" id="confirmOverlay">
  <div class="modal confirm-modal">
    <div class="confirm-icon">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#ef4444" stroke-width="2">
        <polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14H6L5 6"/>
        <path d="M10 11v6M14 11v6"/><path d="M9 6V4h6v2"/>
      </svg>
    </div>
    <h2>Delete Record?</h2>
    <p>This action cannot be undone. Are you sure you want to delete this record?</p>
    <div class="modal-btns">
      <button class="btn-cancel" onclick="closeConfirm()">Cancel</button>
      <button class="btn btn-red" onclick="confirmDelete()">Yes, Delete</button>
    </div>
  </div>
</div>

<script>
 let records = [
  { id: 1, date: "1/15/26", timeStamp: "1:12:15", picture: "assets/image1.png", result: "Positive" },
  { id: 2, date: "1/09/26", timeStamp: "2:42:15", picture: "assets/image2.jpg", result: "Negative" },
  { id: 3, date: "1/20/26", timeStamp: "7:15:26", picture: "assets/image3.jpg", result: "Negative" },
  { id: 4, date: "1/26/26", timeStamp: "3:17:26", picture: "assets/image4.jpg", result: "Positive" },
  { id: 4, date: "1/26/26", timeStamp: "3:17:26", picture: "assets/image 5.webp", result: "Positive" },
  { id: 4, date: "1/26/26", timeStamp: "3:17:26", picture: "assets/image 6.webp", result: "Negative" },
  { id: 4, date: "1/26/26", timeStamp: "3:17:26", picture: "assets/image7.jpg", result: "Positive" },
  { id: 4, date: "1/26/26", timeStamp: "3:17:26", picture: "assets/image8.jpg", result: "Negative" },
  { id: 4, date: "1/26/26", timeStamp: "3:17:26", picture: "assets/image9.jpg", result: "Positive" },
 
];

  let editId = null;
  let deleteId = null;
  let selectedResult = "Positive";
  let pictureData = null;

  // ── CLOCK ──
  function updateClock() {
    const now = new Date();
    document.getElementById("clockTime").textContent = now.toLocaleTimeString("en-PH", { hour: "2-digit", minute: "2-digit", second: "2-digit" });
    document.getElementById("clockDate").textContent = now.toLocaleDateString("en-PH", { weekday: "long", year: "numeric", month: "long", day: "numeric" });
  }
  setInterval(updateClock, 1000);
  updateClock();

  // ── RENDER TABLE ──
  function renderTable() {
    const search = document.getElementById("searchInput").value.toLowerCase();
    const filter = document.getElementById("filterSelect").value;

    const filtered = records.filter(r => {
      const matchSearch = r.date.toLowerCase().includes(search) || r.timeStamp.toLowerCase().includes(search) || r.result.toLowerCase().includes(search);
      const matchFilter = filter === "all" || r.result === filter;
      return matchSearch && matchFilter;
    });

    // Stats
    document.getElementById("statTotal").textContent    = records.length;
    document.getElementById("statPositive").textContent = records.filter(r => r.result === "Positive").length;
    document.getElementById("statNegative").textContent = records.filter(r => r.result === "Negative").length;

    const tbody = document.getElementById("tableBody");
    if (filtered.length === 0) {
      tbody.innerHTML = `<tr class="empty-row"><td colspan="5">No records found.</td></tr>`;
      return;
    }

    tbody.innerHTML = filtered.map((r, i) => `
      <tr style="${i % 2 !== 0 ? 'background:#f8fafc' : ''}">
        <td>${r.date}</td>
        <td class="mono">${r.timeStamp}</td>
        <td>${r.picture
          ? `<img class="pic-thumb" src="${r.picture}" alt="pic" />`
          : `<div class="pic-placeholder">
               <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                 <rect x="3" y="3" width="18" height="18" rx="2"/>
                 <circle cx="8.5" cy="8.5" r="1.5"/>
                 <polyline points="21 15 16 10 5 21"/>
               </svg>
             </div>`
        }</td>
        <td><span class="badge ${r.result === 'Positive' ? 'badge-positive' : 'badge-negative'}">${r.result}</span></td>
        <td>
          <button class="action-btn action-edit" onclick="openEdit(${r.id})">Edit</button>
          <button class="action-btn action-del"  onclick="askDelete(${r.id})">Del</button>
        </td>
      </tr>
    `).join("");
  }

  // ── MODAL ──
  function openModal() {
    editId = null; pictureData = null;
    document.getElementById("modalTitle").textContent = "Add New Record";
    document.getElementById("inputDate").value = "";
    document.getElementById("inputTime").value = "";
    document.getElementById("inputPicture").value = "";
    document.getElementById("imgPreview").style.display = "none";
    document.getElementById("errorMsg").style.display = "none";
    setResult("Positive");
    document.getElementById("modalOverlay").classList.add("active");
  }

  function openEdit(id) {
    const r = records.find(x => x.id === id);
    editId = id; pictureData = r.picture;
    document.getElementById("modalTitle").textContent = "Edit Record";
    document.getElementById("inputDate").value = r.date;
    document.getElementById("inputTime").value = r.timeStamp;
    document.getElementById("inputPicture").value = "";
    document.getElementById("errorMsg").style.display = "none";
    const preview = document.getElementById("imgPreview");
    if (r.picture) { preview.src = r.picture; preview.style.display = "block"; }
    else { preview.style.display = "none"; }
    setResult(r.result);
    document.getElementById("modalOverlay").classList.add("active");
  }

  function closeModal() {
    document.getElementById("modalOverlay").classList.remove("active");
  }

  function setResult(val) {
    selectedResult = val;
    document.getElementById("btnPositive").className = "result-btn" + (val === "Positive" ? " active-pos" : "");
    document.getElementById("btnNegative").className = "result-btn" + (val === "Negative" ? " active-neg" : "");
  }

  function previewImage() {
    const file = document.getElementById("inputPicture").files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = e => {
      pictureData = e.target.result;
      const preview = document.getElementById("imgPreview");
      preview.src = pictureData;
      preview.style.display = "block";
    };
    reader.readAsDataURL(file);
  }

  function saveRecord() {
    const date = document.getElementById("inputDate").value.trim();
    const timeStamp = document.getElementById("inputTime").value.trim();
    const errEl = document.getElementById("errorMsg");
    if (!date || !timeStamp) { errEl.style.display = "block"; return; }
    errEl.style.display = "none";

    if (editId !== null) {
      records = records.map(r => r.id === editId ? { ...r, date, timeStamp, picture: pictureData, result: selectedResult } : r);
    } else {
      records.push({ id: Date.now(), date, timeStamp, picture: pictureData, result: selectedResult });
    }
    closeModal();
    renderTable();
  }

  // ── DELETE ──
  function askDelete(id) {
    deleteId = id;
    document.getElementById("confirmOverlay").classList.add("active");
  }
  function closeConfirm() {
    document.getElementById("confirmOverlay").classList.remove("active");
  }
  function confirmDelete() {
    records = records.filter(r => r.id !== deleteId);
    closeConfirm();
    renderTable();
  }

  // ── INIT ──
  renderTable();
</script>
</body>
</html>